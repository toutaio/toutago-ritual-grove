ritual:
  name: simple-app
  version: 1.0.0
  description: A simple Toutā application
  author: Toutā Team
  license: MIT
  template_engine: fith

compatibility:
  min_touta_version: 0.1.0
  min_go_version: 1.22.0

dependencies:
  packages:
    - github.com/toutaio/toutago
  database:
    required: false

questions:
  - name: app_name
    prompt: What is your application name?
    type: text
    required: true
    validate:
      pattern: "^[a-z][a-z0-9-]*$"
      min_len: 3
      max_len: 50
  
  - name: description
    prompt: Application description
    type: text
    default: My Toutā application
  
  - name: port
    prompt: HTTP port
    type: number
    default: 8080
    validate:
      min: 1024
      max: 65535
  
  - name: database_type
    prompt: Database type (optional)
    type: choice
    choices:
      - none
      - postgres
      - mysql
      - sqlite
    default: none
  
  - name: database_host
    prompt: Database host
    type: text
    default: localhost
    condition:
      field: database_type
      not_equals: none
  
  - name: database_port
    prompt: Database port
    type: number
    default: 5432
    condition:
      field: database_type
      equals: postgres

files:
  templates:
    - src: templates/main.go.fith
      dest: main.go
    - src: templates/config.yaml.fith
      dest: config/config.yaml
  
  static:
    - src: static/README.md
      dest: README.md
  
  protected:
    - config/config.yaml
    - README.md

hooks:
  post_install:
    - go mod tidy
    - go build -o {{app_name}}
