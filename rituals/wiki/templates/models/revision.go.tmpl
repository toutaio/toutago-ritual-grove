package models

import (
	"errors"
	"time"
)

// Revision represents a page revision for version control
type Revision struct {
	ID        int       `json:"id" db:"id"`
	PageID    int       `json:"page_id" db:"page_id"`
	Content   string    `json:"content" db:"content"`
	Author    string    `json:"author" db:"author"`
	Comment   string    `json:"comment" db:"comment"`
	Version   int       `json:"version" db:"version"`
	CreatedAt time.Time `json:"created_at" db:"created_at"`
}

// Validate checks if the revision is valid
func (r *Revision) Validate() error {
	if r.PageID == 0 {
		return errors.New("page_id is required")
	}
	if r.Content == "" {
		return errors.New("content is required")
	}
	if r.Author == "" {
		return errors.New("author is required")
	}
	return nil
}

// Errors
var (
	ErrInvalidTitle   = errors.New("invalid page title")
	ErrInvalidSlug    = errors.New("invalid page slug")
	ErrInvalidContent = errors.New("invalid page content")
)
