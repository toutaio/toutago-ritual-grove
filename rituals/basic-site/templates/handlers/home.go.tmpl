package handlers

import (
	"github.com/toutaio/toutago-cosan-router/pkg/cosan"
	"github.com/toutaio/toutago-fith-renderer"
)

// HomeHandler handles homepage requests
type HomeHandler struct{
	renderer *fith.Engine
}

// NewHomeHandler creates a new home handler
func NewHomeHandler(renderer *fith.Engine) *HomeHandler {
	return &HomeHandler{renderer: renderer}
}

// Index renders the homepage
func (h *HomeHandler) Index(ctx cosan.Context) error {
	data := map[string]interface{}{
		"site_name": "[[ .site_name ]]",
		"message":   "Welcome to your new ToutÄ site!",
	}

	// Render template using fith renderer
	output, err := h.renderer.Render("home.html", data)
	if err != nil {
		return err
	}

	return ctx.HTML(200, string(output))
}
