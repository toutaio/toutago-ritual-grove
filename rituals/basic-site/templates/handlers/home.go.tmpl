package handlers

import (
	"net/http"

	fith "github.com/toutaio/toutago-fith-renderer"
)

// HomeHandler handles homepage requests
type HomeHandler struct {
	renderer *fith.Engine
}

// NewHomeHandler creates a new home handler
func NewHomeHandler(renderer *fith.Engine) *HomeHandler {
	return &HomeHandler{
		renderer: renderer,
	}
}

// Index renders the homepage
func (h *HomeHandler) Index(w http.ResponseWriter, r *http.Request) {
	data := map[string]interface{}{
		"site_name": "{{ .site_name }}",
		"message":   "Welcome to your new ToutÄ site!",
	}

	html, err := h.renderer.Render("home.html", data)
	if err != nil {
		http.Error(w, "Internal Server Error", http.StatusInternalServerError)
		return
	}
	
	w.Header().Set("Content-Type", "text/html; charset=utf-8")
	w.Write([]byte(html))
}
