package handlers

import (
"[[ .module_path ]]/internal/models"
[[ if eq .frontend_type "inertia-vue" -]]
"[[ .module_path ]]/internal"
[[ end -]]
"github.com/toutaio/toutago-cosan-router"
nasc "github.com/toutaio/toutago-nasc-dependency-injector"
[[ if eq .frontend_type "inertia-vue" -]]
"github.com/toutaio/toutago-inertia/pkg/inertia"
[[ end -]]
)

// CategoryHandler handles category operations
type CategoryHandler struct {
container *nasc.Nasc
[[ if eq .frontend_type "inertia-vue" -]]
inertia *inertia.Inertia
[[ end -]]
}

// NewCategoryHandler creates a new category handler
func NewCategoryHandler(container *nasc.Nasc[[ if eq .frontend_type "inertia-vue" ]], inertiaInstance *inertia.Inertia[[ end ]]) *CategoryHandler {
return &CategoryHandler{
container: container,
[[ if eq .frontend_type "inertia-vue" -]]
inertia: inertiaInstance,
[[ end -]]
}
}

// List shows all categories
func (h *CategoryHandler) List(c cosan.Context) error {
categories := []models.Category{
// Mock data for now
}

[[ if eq .frontend_type "inertia-vue" -]]
ic := internal.GetInertiaContext(c, h.inertia)
return ic.Render("Categories/Index", map[string]interface{}{
"categories": categories,
})
[[ else -]]
return c.JSON(200, categories)
[[ end -]]
}

// Show displays a single category with its posts
func (h *CategoryHandler) Show(c cosan.Context) error {
id := c.Param("id")
// TODO: Implement category detail view
_ = id
[[ if eq .frontend_type "inertia-vue" -]]
ic := internal.GetInertiaContext(c, h.inertia)
return ic.Render("Categories/Show", map[string]interface{}{
"category": map[string]interface{}{
"id": id,
"name": "Sample Category",
},
})
[[ else -]]
return c.JSON(200, map[string]string{"status": "not implemented"})
[[ end -]]
}
