package handlers

import (
"[[ .module_path ]]/internal/models"
"github.com/toutaio/toutago-cosan-router"
nasc "github.com/toutaio/toutago-nasc-dependency-injector"
)

// PostHandler handles blog post operations
type PostHandler struct {
container *nasc.Nasc
}

// NewPostHandler creates a new post handler
func NewPostHandler(container *nasc.Nasc) *PostHandler {
return &PostHandler{container: container}
}

// List shows all posts
func (h *PostHandler) List(c cosan.Context) error {
// TODO: Implement pagination
posts := []models.Post{
// Mock data for now
}

return c.JSON(200, posts)
}

// Show displays a single post
func (h *PostHandler) Show(c cosan.Context) error {
// TODO: Fetch post from database
id := c.Param("id")

post := models.Post{
// Mock data for now
}
_ = id // Use id when implementing

return c.JSON(200, post)
}

// Create creates a new post
func (h *PostHandler) Create(c cosan.Context) error {
var post models.Post
if err := c.BindJSON(&post); err != nil {
return c.JSON(400, map[string]string{"error": "Invalid request"})
}

// TODO: Save to database
return c.JSON(201, post)
}

// Update updates an existing post
func (h *PostHandler) Update(c cosan.Context) error {
id := c.Param("id")
var post models.Post
if err := c.BindJSON(&post); err != nil {
return c.JSON(400, map[string]string{"error": "Invalid request"})
}

// TODO: Update in database
_ = id // Use id when implementing
return c.JSON(200, post)
}

// Delete deletes a post
func (h *PostHandler) Delete(c cosan.Context) error {
id := c.Param("id")

// TODO: Delete from database
_ = id // Use id when implementing
return c.JSON(204, nil)
}
