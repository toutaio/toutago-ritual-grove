package handlers

import (
"[[ .module_path ]]/internal/models"
"github.com/toutaio/toutago-cosan-router"
nasc "github.com/toutaio/toutago-nasc-dependency-injector"
)

[[- if .enable_comments ]]

// CommentHandler handles comment operations
type CommentHandler struct {
container *nasc.Nasc
}

// NewCommentHandler creates a new comment handler
func NewCommentHandler(container *nasc.Nasc) *CommentHandler {
return &CommentHandler{container: container}
}

// Create creates a new comment on a post
func (h *CommentHandler) Create(c cosan.Context) error {
postID := c.Param("id")
var comment models.Comment
if err := c.Bind(&comment); err != nil {
return c.JSON(400, map[string]string{"error": "Invalid request"})
}

// TODO: Save comment to database
_ = postID
return c.JSON(201, comment)
}

// Delete removes a comment
func (h *CommentHandler) Delete(c cosan.Context) error {
id := c.Param("id")

// TODO: Delete from database
_ = id
return c.JSON(204, nil)
}
[[- end ]]
