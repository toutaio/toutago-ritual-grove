package repositories

import (
	"context"
	"[[ .module_path ]]/internal/domain"
)

// UserRepository defines the interface for user data access
type UserRepository interface {
	// Create creates a new user
	Create(ctx context.Context, user *domain.User) error

	// Update updates an existing user
	Update(ctx context.Context, user *domain.User) error

	// Delete deletes a user by ID
	Delete(ctx context.Context, id string) error

	// FindByID retrieves a user by ID
	FindByID(ctx context.Context, id string) (*domain.User, error)

	// FindByEmail retrieves a user by email
	FindByEmail(ctx context.Context, email string) (*domain.User, error)

	// FindByUsername retrieves a user by username
	FindByUsername(ctx context.Context, username string) (*domain.User, error)

	// List retrieves all users with optional filters
	List(ctx context.Context, filters UserFilters) ([]*domain.User, error)

	// ExistsByEmail checks if a user exists with the given email
	ExistsByEmail(ctx context.Context, email string) (bool, error)

	// ExistsByUsername checks if a user exists with the given username
	ExistsByUsername(ctx context.Context, username string) (bool, error)

	// Count returns the total number of users
	Count(ctx context.Context) (int, error)

	// IsFirstUser checks if there are no users in the system
	IsFirstUser(ctx context.Context) (bool, error)
}

// UserFilters represents filters for listing users
type UserFilters struct {
	Role     *domain.Role
	IsActive *bool
	Limit    int
	Offset   int
}
